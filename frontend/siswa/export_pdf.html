<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Laporan Hasil Tes Diagnostik - {{ student.nama }}</title>
    <style type="text/css">
        @page {
            size: a4 portrait;
            margin: 2.54cm;
        }

        body {
            font-family: 'Helvetica', 'Arial', sans-serif;
            font-size: 11pt;
            line-height: 1.5;
            color: #333333;
            margin: 0;
            padding: 0;
        }

        .report-header {
            background-color: #003366;
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 8px 8px 0 0;
        }
        .report-header h1 {
            margin: 0;
            font-size: 20pt;
            font-weight: bold;
        }

        .report-date {
            text-align: center;
            margin-top: 20px;
            margin-bottom: 20px;
            font-size: 10pt;
            color: #555;
            font-style: italic;
        }

        .student-info-table {
            width: 100%;
            font-size: 11pt;
            border-collapse: collapse;
            margin-bottom: 30px;
        }
        .student-info-table td {
            padding: 4px 5px;
            vertical-align: top;
        }
        .info-label {
            width: 120px;
        }
        .info-value {
            font-weight: bold;
        }
        .info-right {
            text-align: left;
        }

        .section-title {
            font-size: 14pt;
            font-weight: bold;
            color: #003366;
            border-bottom: 2px solid #003366;
            padding-bottom: 6px;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        .summary-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
        }
        .summary-table td {
            padding: 10px;
            border: 1px solid #dee2e6;
            vertical-align: top;
        }
        .summary-label {
            background-color: #f8f9fa;
            font-weight: bold;
            width: 40%;
        }
        .summary-value {
            text-align: right;
            font-weight: bold;
            font-size: 12pt;
        }
        .description-box {
            background-color: #eef7ff;
            border: 1px solid #d1e9ff;
            padding: 12px;
            font-size: 10pt;
            border-radius: 5px;
            margin-top: 5px;
        }
        


        .history-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 9pt;
            table-layout: auto;
            page-break-inside: auto;
        }
        .history-table tr {
            page-break-inside: auto;
        }
        .history-table td {
            padding: 8px;
            border: 1px solid #cccccc;
            vertical-align: top;
            word-wrap: break-word;
        }
        .history-table th {
            background-color: #ecf0f1;
            color: #34495e;
            font-weight: bold;
            padding: 8px;
            border: 1px solid #cccccc;
            text-align: left;
            vertical-align: middle;
            font-size: 9pt;
        }
        .history-table .number-cell {
            text-align: center;
            vertical-align: middle;
            font-weight: bold;
        }
        .history-table th.number-header {
            text-align: center;
        }
        
        .status-correct, .text-correct {
            color: #198754;
            font-weight: bold;
        }
        .status-incorrect, .text-incorrect {
            color: #dc3545;
            font-weight: bold;
        }
        .history-table .status-cell {
            text-align: center;
            vertical-align: middle;
        }
        
        .footer {
            text-align: center;
            font-size: 9pt;
            color: #7f8c8d;
            border-top: 1px solid #ecf0f1;
            padding-top: 15px;
            margin-top: 40px;
        }
        
        .page-break {
            page-break-before: always;
        }
        
        .recommendation-intro {
            background-color: #f8f9fa;
            border-left: 4px solid #003366;
            padding: 15px;
            margin: 15px 0;
            font-style: italic;
            line-height: 1.6;
            border-radius: 5px;
        }
        
        .recommendation-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 9pt;
            page-break-inside: auto;
            table-layout: auto;
        }
        
        .recommendation-table th {
            background-color: #ecf0f1;
            color: #34495e;
            padding: 8px;
            text-align: left;
            font-weight: bold;
            border: 1px solid #cccccc;
            vertical-align: middle;
            font-size: 10pt;
        }
        
        .recommendation-table td {
            padding: 8px;
            border: 1px solid #cccccc;
            vertical-align: top;
            line-height: 1.5;
            word-wrap: break-word;
        }
        
        .recommendation-table tr {
            page-break-inside: avoid;
            page-break-after: auto;
        }
        
        .recommendation-table tbody {
            page-break-inside: auto;
        }
        
        .recommendation-table .rec-number {
            width: 5%;
            text-align: center;
            font-weight: bold;
            background-color: #f8f9fa;
            vertical-align: middle;
            font-size: 9pt;
        }
        
        .recommendation-table td strong {
            color: #003366;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 5px;
            font-size: 9.5pt;
        }
        
        .recommendation-table td {
            text-align: justify;
        }
        
        .recommendation-table td .activity-description {
            color: #444;
            line-height: 1.6;
            text-align: justify;
        }
        

        
        .recommendation-outro {
            background-color: #eef7ff;
            border: 1px solid #d1e9ff;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            line-height: 1.6;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="report-header">
        <h1>Laporan Hasil Tes Diagnostik</h1>
    </div>

    <div class="page-container">
        <div class="report-date">
            Tanggal Laporan: {{ result.updated_at.strftime('%d %B %Y') if result.updated_at else now().strftime('%d %B %Y') }}
        </div>

        <table class="student-info-table">
            <tr>
                <td style="width: 50%;">
                    <table class="student-info-table">
                        <tr><td class="info-label">Nama Siswa</td><td>:</td><td class="info-value">{{ student.nama }}</td></tr>
                        <tr><td class="info-label">Kelas</td><td>:</td><td class="info-value">{{ student.kelas }}</td></tr>
                    </table>
                </td>
                <td style="width: 50%;" class="info-right">
                    <table class="student-info-table">
                        <tr><td class="info-label">Materi Tes</td><td>:</td><td class="info-value">{{ collection.name }}</td></tr>
                        <tr><td class="info-label">Guru Pengampu</td><td>:</td><td class="info-value">{{ collection.guru.nama if collection and collection.guru else 'Nama Guru' }}</td></tr>
                    </table>
                    </td>
            </tr>
        </table>

        <div class="section-title">A. Ringkasan Hasil Tes</div>
        <table class="summary-table">
            {% set level_descriptions = {
                1: 'Kesadaran Teknologi: Siswa mampu mengenali dan mengidentifikasi konsep dan istilah dasar.',
                2: 'Literasi Teknologi: Siswa dapat menjelaskan dan membandingkan konsep-konsep teknologi yang mendasar.',
                3: 'Kemampuan Dasar: Siswa mampu menerapkan pengetahuan dalam konteks praktis dan sederhana.',
                4: 'Kemampuan Lanjut: Siswa mampu menganalisis dan memecahkan masalah menggunakan konsep yang lebih kompleks.',
                5: 'Kreativitas Dasar: Siswa dapat mulai merancang solusi sederhana berdasarkan pemahaman yang dimiliki.',
                6: 'Kreativitas Menengah: Siswa mampu mengintegrasikan beberapa konsep untuk menciptakan solusi yang lebih praktis dan efektif.',
                7: 'Kritik Teknologi: Siswa mampu mengevaluasi, mengkritisi, dan merefleksikan penerapan konsep secara mendalam.'
            } %}
            <tr>
                <td class="summary-label">Tingkat Kemampuan Tercapai</td>
                <td class="summary-value">{{ result.current_level }} / 7</td>
            </tr>
            <tr>
                <td class="summary-label">Akurasi Jawaban</td>
                <td class="summary-value">{{ "%.2f"|format(accuracy|float) }}%</td>
            </tr>
            <tr>
                <td class="summary-label">Detail Jawaban</td>
                <td class="summary-value" style="font-size: 11pt;">
                    <span class="text-correct">Tepat: {{ result.correct }}</span> | 
                    <span class="text-incorrect">Kurang Tepat: {{ result.incorrect }}</span> | 
                    Total: {{ total_questions }}
                </td>
            </tr>
        </table>
        <div class="description-box">
            <strong>Deskripsi Tingkat Kemampuan:</strong><br>
            {{ level_descriptions.get(result.current_level, 'Level tidak terdefinisi.') }}
        </div>
        
        <div class="page-break"></div>
        <div class="page-container">
            <div class="section-title">B. Analisis Jawaban dan Rekomendasi Pembelajaran</div>
            
            <!-- Tabel 1: Analisis Mendalam Hasil Pembelajaran -->
            <h4 style="color: #007bff; margin: 20px 0 15px 0; font-size: 12pt;">🧠 Analisis Mendalam Hasil Pembelajaran</h4>
            
            {% set total_answered = result.correct + result.incorrect %}
            {% set accuracy_rate = (result.correct / total_answered * 100) if total_answered > 0 else 0 %}
            
            <table class="analysis-table" style="width: 100%; border-collapse: collapse; margin-bottom: 25px; font-size: 10pt;">
                <thead>
                    <tr>
                        <th style="background-color: #007bff; color: white; padding: 12px; text-align: left; font-weight: bold; border: 1px solid #dee2e6; width: 25%;">Aspek Analisis</th>
                        <th style="background-color: #007bff; color: white; padding: 12px; text-align: left; font-weight: bold; border: 1px solid #dee2e6; width: 75%;">Hasil Analisis</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="background-color: #f8f9fa; padding: 12px; border: 1px solid #dee2e6; font-weight: bold; vertical-align: top;">Gambaran Umum Pencapaian</td>
                        <td style="padding: 12px; border: 1px solid #dee2e6; vertical-align: top; text-align: justify; line-height: 1.6;">
                            Dari {{ total_answered }} soal yang kamu jawab pada materi "{{ collection.name }}", kamu berhasil menjawab dengan tepat sebanyak {{ result.correct }} soal dan {{ result.incorrect }} soal lainnya masih perlu diperbaiki. Ini menunjukkan tingkat penguasaan sebesar {{ "%.1f"|format(accuracy_rate) }}% untuk materi ini.
                        </td>
                    </tr>
                    <tr>
                        <td style="background-color: #f8f9fa; padding: 12px; border: 1px solid #dee2e6; font-weight: bold; vertical-align: top;">Analisis Pencapaian</td>
                        <td style="padding: 12px; border: 1px solid #dee2e6; vertical-align: top; text-align: justify; line-height: 1.6;">
                            {% if accuracy_rate >= 85 %}
                            Luar biasa, {{ student.nama.split()[0] }}! Kamu menunjukkan pemahaman yang sangat baik terhadap materi "{{ collection.name }}". Pencapaian {{ "%.1f"|format(accuracy_rate) }}% ini menandakan bahwa kamu sudah menguasai sebagian besar konsep dengan solid. Tahap kemampuan yang kamu capai (Tahap {{ result.current_level }}) menunjukkan bahwa kamu sudah siap untuk mengeksplorasi aspek yang lebih mendalam dan aplikatif dari materi ini.
                            {% elif accuracy_rate >= 70 %}
                            Bagus sekali, {{ student.nama.split()[0] }}! Dengan pencapaian {{ "%.1f"|format(accuracy_rate) }}%, kamu sudah memiliki fondasi yang kuat dalam materi "{{ collection.name }}". Tahap {{ result.current_level }} yang kamu capai menunjukkan pemahaman yang baik, namun masih ada ruang untuk pengembangan lebih lanjut. Beberapa konsep mungkin masih perlu diperdalam agar pemahamanmu menjadi lebih komprehensif.
                            {% elif accuracy_rate >= 50 %}
                            Kamu sudah menunjukkan pemahaman dasar yang cukup baik pada materi "{{ collection.name }}" dengan pencapaian {{ "%.1f"|format(accuracy_rate) }}%. Tahap {{ result.current_level }} yang kamu capai menunjukkan bahwa kamu sudah memahami konsep-konsep fundamental. Namun, untuk mencapai penguasaan yang lebih optimal, kamu perlu memperkuat beberapa area yang masih lemah dan meningkatkan kemampuan aplikasi konsep dalam berbagai situasi.
                            {% else %}
                            Jangan khawatir, {{ student.nama.split()[0] }}! Setiap proses pembelajaran membutuhkan waktu. Pencapaian {{ "%.1f"|format(accuracy_rate) }}% menunjukkan bahwa kamu masih dalam tahap membangun pemahaman terhadap materi "{{ collection.name }}". Tahap {{ result.current_level }} yang kamu capai adalah titik awal yang baik untuk memulai penguatan konsep-konsep dasar. Dengan strategi belajar yang tepat, kamu pasti bisa meningkatkan pemahamanmu secara signifikan.
                            {% endif %}
                        </td>
                    </tr>
                    {% if result.incorrect > 0 %}
                    <tr>
                        <td style="background-color: #f8f9fa; padding: 12px; border: 1px solid #dee2e6; font-weight: bold; vertical-align: top;">Area yang Perlu Diperkuat</td>
                        <td style="padding: 12px; border: 1px solid #dee2e6; vertical-align: top; text-align: justify; line-height: 1.6;">
                            Dari {{ result.incorrect }} jawaban yang belum tepat, ini memberikan petunjuk penting tentang area mana yang perlu mendapat perhatian lebih. Kesalahan-kesalahan ini bukanlah kegagalan, melainkan peluang emas untuk memperdalam pemahaman dan memperkuat konsep-konsep yang masih lemah. Setiap kesalahan memberikan insight berharga tentang cara berpikir dan pendekatan yang perlu disesuaikan dalam mempelajari materi "{{ collection.name }}".
                        </td>
                    </tr>
                    {% endif %}
                    <tr>
                        <td style="background-color: #f8f9fa; padding: 12px; border: 1px solid #dee2e6; font-weight: bold; vertical-align: top;">Potensi Pengembangan</td>
                        <td style="padding: 12px; border: 1px solid #dee2e6; vertical-align: top; text-align: justify; line-height: 1.6;">
                            Berdasarkan pola jawaban yang kamu berikan, terlihat bahwa kamu memiliki potensi yang baik untuk terus berkembang dalam materi "{{ collection.name }}". 
                            {% if result.current_level <= 2 %}
                            Fokus utama saat ini sebaiknya pada penguatan pemahaman konsep-konsep dasar dan terminologi yang menjadi fondasi untuk pembelajaran selanjutnya.
                            {% elif result.current_level <= 4 %}
                            Kamu sudah siap untuk mengembangkan kemampuan aplikasi konsep dalam berbagai konteks dan situasi yang lebih kompleks.
                            {% else %}
                            Kamu sudah mencapai tahap yang memungkinkan untuk mengeksplorasi aspek kreatif dan analitis yang lebih mendalam dari materi ini.
                            {% endif %}
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <!-- Tabel 2: Rekomendasi Belajar Berdasarkan Analisis -->
            {% if result.incorrect > 0 %}
            <h4 style="color: #f59e0b; margin: 20px 0 15px 0; font-size: 12pt;">📚 Rekomendasi Belajar Berdasarkan Analisis Jawaban</h4>
            
            {% set incorrect_percentage = (result.incorrect / (result.correct + result.incorrect) * 100) %}
            
            <table class="recommendation-analysis-table" style="width: 100%; border-collapse: collapse; margin-bottom: 25px; font-size: 10pt;">
                <thead>
                    <tr>
                        <th style="background-color: #f59e0b; color: white; padding: 12px; text-align: left; font-weight: bold; border: 1px solid #dee2e6; width: 25%;">Kategori Rekomendasi</th>
                        <th style="background-color: #f59e0b; color: white; padding: 12px; text-align: left; font-weight: bold; border: 1px solid #dee2e6; width: 75%;">Strategi Pembelajaran yang Direkomendasikan</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="background-color: #fff7ed; padding: 12px; border: 1px solid #dee2e6; font-weight: bold; vertical-align: top;">Pola Kesalahan Teridentifikasi</td>
                        <td style="padding: 12px; border: 1px solid #dee2e6; vertical-align: top; text-align: justify; line-height: 1.6;">
                            Dari analisis mendalam terhadap {{ result.incorrect }} jawaban yang belum tepat, saya menemukan pola pembelajaran yang dapat kita optimalkan untuk meningkatkan pemahamanmu dalam "{{ collection.name }}". 
                            {% if incorrect_percentage >= 60 %}
                            Meskipun masih banyak konsep yang perlu diperkuat, ini adalah kesempatan emas untuk membangun fondasi yang kuat dari awal. Fokus utama sebaiknya pada pemahaman konsep dasar secara bertahap dan sistematis.
                            {% elif incorrect_percentage >= 30 %}
                            Beberapa area spesifik perlu mendapat perhatian khusus, namun kemajuan yang sudah dicapai menunjukkan potensi yang baik. Kita akan fokus pada penguatan area yang lemah sambil mempertahankan kekuatan yang sudah ada.
                            {% else %}
                            Kesalahan yang ada cenderung pada detail-detail tertentu dan kemungkinan besar dapat diperbaiki dengan strategi yang tepat sasaran. Fokus pada fine-tuning pemahaman akan memberikan hasil yang optimal.
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td style="background-color: #fff7ed; padding: 12px; border: 1px solid #dee2e6; font-weight: bold; vertical-align: top;">Strategi Pembelajaran Utama</td>
                        <td style="padding: 12px; border: 1px solid #dee2e6; vertical-align: top; text-align: justify; line-height: 1.6;">
                            {% if incorrect_percentage >= 60 %}
                            <strong>1. Pembelajaran Bertahap dan Terstruktur:</strong> Mulai dengan memahami satu konsep fundamental setiap hari. Jangan terburu-buru pindah ke konsep berikutnya sebelum benar-benar menguasai yang sedang dipelajari. Buat catatan ringkas dengan contoh konkret untuk setiap konsep.<br><br>
                            <strong>2. Visualisasi dan Analogi:</strong> Manfaatkan diagram, gambar, atau analogi sederhana untuk memahami konsep abstrak dalam "{{ collection.name }}". Cari video pembelajaran yang menggunakan animasi atau simulasi untuk memperjelas konsep yang sulit.<br><br>
                            <strong>3. Praktik Berulang dengan Variasi:</strong> Kerjakan soal-soal dasar dengan pola yang sama secara berulang sampai menjadi otomatis, lalu secara bertahap tingkatkan variasi dan kompleksitas. Fokus pada akurasi, bukan kecepatan.
                            {% elif incorrect_percentage >= 30 %}
                            <strong>1. Identifikasi dan Perkuat Area Lemah:</strong> Dari pola kesalahan, fokuskan 70% waktu belajar pada konsep-konsep yang masih bermasalah. Buat daftar topik yang sering salah dan pelajari satu per satu secara mendalam dengan contoh beragam.<br><br>
                            <strong>2. Hubungkan dengan Konsep yang Sudah Dikuasai:</strong> Cari kaitan antara materi yang sudah dipahami dengan yang masih sulit. Buat peta konsep yang menunjukkan hubungan antar topik untuk memperkuat pemahaman holistik.<br><br>
                            <strong>3. Latihan Terfokus dan Reflektif:</strong> Setelah mengerjakan soal, selalu analisis mengapa jawaban benar atau salah. Buat catatan pola kesalahan dan cara pencegahannya. Diskusikan kesulitan dengan teman atau guru untuk mendapat perspektif berbeda.
                            {% else %}
                            <strong>1. Fine-tuning dan Pendalaman:</strong> Fokus pada detail-detail yang menyebabkan kesalahan. Sering kali ini berkaitan dengan ketelitian, pemahaman instruksi soal, atau penerapan rumus/konsep dalam konteks yang sedikit berbeda.<br><br>
                            <strong>2. Latihan Soal Bertingkat:</strong> Tingkatkan kompleksitas soal secara bertahap. Cari soal-soal yang menggabungkan beberapa konsep sekaligus atau memerlukan analisis yang lebih mendalam untuk mengasah kemampuan berpikir kritis.<br><br>
                            <strong>3. Eksplorasi dan Inovasi:</strong> Coba pendekatan alternatif dalam menyelesaikan masalah. Kembangkan intuisi dan kemampuan reasoning yang lebih kuat dengan mengeksplorasi berbagai metode penyelesaian untuk satu masalah yang sama.
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td style="background-color: #fff7ed; padding: 12px; border: 1px solid #dee2e6; font-weight: bold; vertical-align: top;">Motivasi & Dukungan</td>
                        <td style="padding: 12px; border: 1px solid #dee2e6; vertical-align: top; text-align: justify; line-height: 1.6; background-color: #fef3c7;">
                            <strong>💪 Motivasi Khusus:</strong> 
                            {% if incorrect_percentage >= 60 %}
                            Setiap ahli pernah memulai dari titik yang sama denganmu. Yang membedakan adalah konsistensi dan kesabaran dalam membangun pemahaman step by step. Setiap konsep yang berhasil dikuasai adalah kemenangan kecil yang layak dirayakan!
                            {% elif incorrect_percentage >= 30 %}
                            Kamu sudah berada di jalur yang benar! Kesalahan yang ada menunjukkan area spesifik yang perlu diperkuat. Dengan fokus dan strategi yang tepat, kemajuan signifikan sangat mungkin dicapai dalam waktu dekat.
                            {% else %}
                            Pencapaianmu sudah sangat baik! Kesalahan kecil yang ada adalah stepping stone untuk mencapai tingkat mastery. Dengan fine-tuning yang tepat, kamu bisa menjadi contoh bagi teman-teman lainnya.
                            {% endif %}
                            Ingat, proses pembelajaran yang berkelanjutan lebih berharga daripada hasil sempurna yang instan.
                        </td>
                    </tr>
                </tbody>
            </table>
            {% endif %}

        {% set performance_analysis = {
            'total_questions': result.correct + result.incorrect,
            'accuracy_percentage': (result.correct / (result.correct + result.incorrect) * 100) if (result.correct + result.incorrect) > 0 else 0,
            'is_high_performer': ((result.correct / (result.correct + result.incorrect) * 100) if (result.correct + result.incorrect) > 0 else 0) >= 80,
            'is_struggling': ((result.correct / (result.correct + result.incorrect) * 100) if (result.correct + result.incorrect) > 0 else 0) < 50,
            'current_stage': 'Stage I' if result.current_level <= 2 else ('Stage II' if result.current_level <= 3 else ('Stage III' if result.current_level <= 4 else 'Stage IV')),
            'next_focus': {
                1: 'memahami konsep dasar dan terminologi teknologi',
                2: 'menguasai literasi teknologi dan hubungan antar konsep',
                3: 'mengembangkan kemampuan aplikasi praktis teknologi',
                4: 'meningkatkan kreativitas dalam pemecahan masalah teknologi',
                5: 'memperkuat kemampuan teknologi dan aplikasi lanjutan',
                6: 'mengembangkan kemampuan berpikir kritis terhadap teknologi',
                7: 'mengintegrasikan kreativitas dan kritik teknologi secara mendalam'
            }
        } %}
        
        <!-- Tabel Rekomendasi Belajar di Rumah telah dihapus sesuai permintaan -->
        <div style="display: none;">
            <!-- Konten tabel yang dihapus -->
                {% if result.current_level == 1 %}
                <tr>
                    <td class="rec-number">1</td>
                    <td><strong>Pelajari Istilah Dasar:</strong> Luangkan 15 menit setiap hari untuk baca dan hafalkan istilah-istilah teknologi dasar. Buat kartu kecil berisi istilah di satu sisi dan artinya di sisi lain.</td>
                </tr>
                <tr>
                    <td class="rec-number">2</td>
                    <td><strong>Tonton Video Edukatif:</strong> Cari video YouTube tentang "{{ collection.name }}" yang dijelaskan dengan bahasa sederhana. Tonton 1-2 video pendek (5-10 menit) setiap hari.</td>
                </tr>
                <tr>
                    <td class="rec-number">3</td>
                    <td><strong>Praktik Identifikasi:</strong> Keliling rumah dan coba identifikasi teknologi apa saja yang ada (handphone, TV, WiFi, dll). Tulis di buku dan cari tahu fungsi dasarnya.</td>
                </tr>
                <tr>
                    <td class="rec-number">4</td>
                    <td><strong>Buat Kamus Mini:</strong> Bikin kamus pribadi berisi 5 kata teknologi baru setiap minggu lengkap dengan contoh penggunaannya.</td>
                </tr>
                {% elif result.current_level == 2 %}
                <tr>
                    <td class="rec-number">1</td>
                    <td><strong>Kelompokkan Teknologi:</strong> Buat mind map atau diagram yang mengelompokkan teknologi berdasarkan fungsinya (komunikasi, hiburan, produktivitas, dll).</td>
                </tr>
                <tr>
                    <td class="rec-number">2</td>
                    <td><strong>Pelajari Hubungan Antar Teknologi:</strong> Pilih 2-3 teknologi yang kamu pakai setiap hari, lalu cari tahu bagaimana mereka saling berhubungan (contoh: handphone + internet + aplikasi).</td>
                </tr>
                <tr>
                    <td class="rec-number">3</td>
                    <td><strong>Baca Artikel Teknologi:</strong> Baca 1 artikel ringan tentang teknologi setiap hari dari website atau blog teknologi. Catat poin penting yang kamu dapat.</td>
                </tr>
                <tr>
                    <td class="rec-number">4</td>
                    <td><strong>Diskusi dengan Keluarga:</strong> Ajak orang tua atau saudara diskusi tentang teknologi yang mereka gunakan dan bagaimana cara kerjanya.</td>
                </tr>
                {% elif result.current_level == 3 %}
                <tr>
                    <td class="rec-number">1</td>
                    <td><strong>Praktik Langsung:</strong> Setiap hari coba gunakan 1 aplikasi atau fitur teknologi yang belum pernah kamu coba. Catat langkah-langkahnya di notes.</td>
                </tr>
                <tr>
                    <td class="rec-number">2</td>
                    <td><strong>Ikuti Tutorial Online:</strong> Cari tutorial step-by-step di YouTube tentang cara menggunakan tools atau aplikasi yang berkaitan dengan "{{ collection.name }}".</td>
                </tr>
                <tr>
                    <td class="rec-number">3</td>
                    <td><strong>Buat Jadwal Digital:</strong> Gunakan aplikasi kalendar atau reminder untuk mengatur jadwal belajar dan aktivitas harianmu. Rasakan sendiri manfaat teknologi untuk produktivitas.</td>
                </tr>
                <tr>
                    <td class="rec-number">4</td>
                    <td><strong>Simulasi Masalah:</strong> Buat skenario "bagaimana jika" dan coba pecahkan dengan teknologi. Contoh: "Bagaimana jika harus presentasi tapi tidak bisa tatap muka?"</td>
                </tr>
                {% elif result.current_level == 4 %}
                <tr>
                    <td class="rec-number">1</td>
                    <td><strong>Modifikasi dan Kustomisasi:</strong> Coba ubah pengaturan aplikasi atau perangkat yang kamu pakai sehari-hari. Eksplorasi fitur-fitur lanjutan yang tersembunyi.</td>
                </tr>
                <tr>
                    <td class="rec-number">2</td>
                    <td><strong>Debug Masalah Sederhana:</strong> Kalau ada masalah dengan teknologi di rumah (WiFi lemot, aplikasi error, dll), coba cari solusinya sendiri dulu sebelum minta tolong.</td>
                </tr>
                <tr>
                    <td class="rec-number">3</td>
                    <td><strong>Belajar Troubleshooting:</strong> Pelajari cara mengatasi masalah umum teknologi melalui forum online seperti Kaskus atau Reddit. Praktikkan di perangkatmu sendiri.</td>
                </tr>
                <tr>
                    <td class="rec-number">4</td>
                    <td><strong>Cari Solusi Alternatif:</strong> Kalau ada masalah, jangan cuma pakai satu cara aja. Coba pikirkan cara lain yang bisa jadi solusi.</td>
                </tr>
                {% elif result.current_level == 5 %}
                <tr>
                    <td class="rec-number">1</td>
                    <td><strong>Tantangan yang Lebih Sulit:</strong> Sekarang coba selesaikan masalah yang lebih rumit pakai teknologi ini. Gabungkan beberapa teknologi sekaligus kalau perlu.</td>
                </tr>
                <tr>
                    <td class="rec-number">2</td>
                    <td><strong>Rakit dan Atur:</strong> Belajar cara menggabungkan beberapa bagian teknologi jadi satu sistem yang bisa jalan dengan baik.</td>
                </tr>
                <tr>
                    <td class="rec-number">3</td>
                    <td><strong>Mulai Belajar Menilai:</strong> Coba lihat mana teknologi atau cara yang paling efektif dan efisien untuk masalah tertentu.</td>
                </tr>
                {% elif result.current_level == 6 %}
                <!-- Baris rekomendasi untuk level 6 dihapus -->
                {% elif result.current_level == 7 %}
                <tr>
                    <td class="rec-number">1</td>
                    <td><strong>Rancang Solusi Inovatif:</strong> Coba bikin ide solusi teknologi baru untuk masalah yang kamu lihat di sekitar. Gambar atau tulis idenya secara detail.</td>
                </tr>
                <tr>
                    <td class="rec-number">2</td>
                    <td><strong>Integrasikan Multi-Konsep:</strong> Gabungkan berbagai konsep teknologi yang udah kamu pelajari untuk menciptakan sesuatu yang lebih canggih dan berguna.</td>
                </tr>
                <tr>
                    <td class="rec-number">3</td>
                    <td><strong>Optimalisasi dan Inovasi:</strong> Cari cara untuk membuat teknologi yang ada jadi lebih efisien, lebih mudah dipakai, atau lebih ramah lingkungan.</td>
                </tr>
                {% endif %}
                
                <!-- Rekomendasi umum untuk semua level -->
                <!-- Baris rekomendasi umum dihapus -->
        </div>
        <!-- Tabel telah dihapus -->
            <p class="recommendation-outro">
                {% if performance_analysis.accuracy_percentage >= 80 %}
                Kerja bagus, {{ student.nama.split()[0] }}! Kamu sudah menguasai {{ performance_analysis.accuracy_percentage|round|int }}% materi ini. Lanjutkan dengan rekomendasi di atas untuk naik ke level yang lebih tinggi. Saya yakin kamu bisa jadi yang terdepan!
                {% elif performance_analysis.accuracy_percentage >= 60 %}
                Bagus sekali, {{ student.nama.split()[0] }}! Dengan penguasaan {{ performance_analysis.accuracy_percentage|round|int }}%, kamu tinggal sedikit lagi untuk mahir. Ikuti rekomendasi di atas secara konsisten, pasti kamu bisa naik level!
                {% endif %}
            </p>
        </div>
        
        {% if answers and answers|length > 0 %}
        <div class="page-break"></div>
        <div class="page-container">
            <div class="section-title">C. Rincian Jawaban Siswa</div>
            <table class="history-table">
                <thead>
                    <tr>
                        <th class="number-header" style="width: 5%;">No</th>
                        <th style="width: 45%;">Pertanyaan</th>
                        <th style="width: 20%;">Jawaban Siswa</th>
                        <th style="width: 20%;">Jawaban Benar</th>
                        <th class="status-cell" style="width: 10%;">Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for answer in answers %}
                    <tr>
                        <td class="number-cell">{{ loop.index }}</td>
                        <td>{{ answer.question }}</td>
                        <td>{{ answer.user_answer }}</td>
                        <td>{{ answer.correct_answer }}</td>
                        <td class="status-cell {% if answer.is_correct %}status-correct{% else %}status-incorrect{% endif %}">
                            {{ 'Tepat' if answer.is_correct else 'Kurang Tepat' }}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div class="footer">
                <p>Laporan ini dibuat secara otomatis pada {{ now().strftime('%d %B %Y, %H:%M:%S') }}</p>
            </div>
        </div>
        {% endif %}
        
        {% if not answers or answers|length == 0 %}
        <div class="footer">
            <p>Laporan ini dibuat secara otomatis pada {{ now().strftime('%d %B %Y, %H:%M:%S') }}</p>
        </div>
        {% endif %}
    </div>
</body>
</html>